{"version":3,"file":"webpack-chain-module-resolution-host-adapter.js","sourceRoot":"","sources":["../../src/webpack-chain-module-resolution-host-adapter.ts"],"names":[],"mappings":";;;;;;AACA,6BAA4C,uBAAwB,CAAC,CAAA;AAErE,wCAAsC,2BAA2B,CAAC,CAAA;AAIlE;IAA6D,2DAA2B;IAItF,iDAAY,IAA0B,EAAS,cAA8B;QAC3E,kBAAM,IAAI,CAAC,CAAC;QADiC,mBAAc,GAAd,cAAc,CAAgB;QAE3E,IAAI,CAAC,OAAO,GAAG,IAAI,+CAAqB,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,CAAC;IAC7F,CAAC;IAED,8DAAY,GAAZ,UAAa,IAAY;QAEvB,IAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAE1D,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC,CAAC,CAAC;YACnB,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAClC,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACrC,MAAM,IAAI,KAAK,CAAC,kDAAgD,OAAS,CAAC,CAAC;QAC7E,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACnC,CAAC;IAEH,CAAC;IACH,8CAAC;AAAD,CAAC,AAtBD,CAA6D,0CAA2B,GAsBvF;AAtBY,+CAAuC,0CAsBnD,CAAA","sourcesContent":["import { ModuleResolutionHost } from 'typescript';\nimport { ModuleResolutionHostAdapter } from '@angular/compiler-cli' ;\n\nimport { WebpackResourceLoader } from './webpack-resource-loader';\nimport { PathTransformer } from './plugin';\nimport { WebpackWrapper } from './webpack-wrapper';\n\nexport class WebpackChainModuleResolutionHostAdapter extends ModuleResolutionHostAdapter {\n  private _loader: WebpackResourceLoader;\n  private _pathTransformer: PathTransformer;\n\n  constructor(host: ModuleResolutionHost, public webpackWrapper: WebpackWrapper) {\n    super(host);\n    this._loader = new WebpackResourceLoader(this.webpackWrapper.compiler.createCompilation());\n  }\n\n  readResource(path: string): Promise<string> {\n\n    const newPath = this.webpackWrapper.pathTransformer(path);\n\n    if (newPath === '') {\n      return Promise.resolve(newPath);\n    } else if (!this.fileExists(newPath)) {\n      throw new Error(`Compilation failed. Resource file not found: ${newPath}`);\n    } else {\n      return this._loader.get(newPath);\n    }\n\n  }\n}\n"]}